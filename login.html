<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>login page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link href="./2ndform.css" rel="stylesheet" type="text/css" />
  </head>
  <header>
    <div>
      <h1>Welcome to login!</h1>
      <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Navbar</a>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="#">Link</a>
              </li>
              <ul class="navbar-nav">
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle"
                    id="navbarDropdown"
                    role="button"
                    data-toggle="dropdown"
                    href="#"
                    >User <span class="caret"></span
                  ></a>
                  <ul class="dropdown-menu">
                    <li><a href="#" class="dropdown-item">Account</a></li>
                    <li><a href="#" class="dropdown-item">Setting</a></li>
                    <li><a href="#" class="dropdown-item">Sign out</a></li>
                  </ul>
                </li>
              </ul>

              <li class="nav-item">
                <a class="nav-link active">Affiliates</a>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input
                class="form-control me-2"
                type="search"
                placeholder="Search"
                aria-label="Search"
              />
              <button class="btn btn-outline-success" type="submit">
                Search
              </button>
            </form>
          </div>
        </div>
      </nav>
    </div>
  </header>
  <body onload="login()">
    <div class="login">
      <div id="container">
        <h1>Enter here</h1>
        <!-- action= "http://localhost:3000/"  -->
        <form>
          <label for="username">Enter username.</label>
          <input
            type="text"
            id="username"
            name="username"
            placeholder="username"
            required
          />
          <label for="password">Enter password</label>
          <input
            type="text"
            id="password"
            name="password"
            placeholder="password"
            required
          />
          <div id="grid">
            <div class="item1">
              <label for="male">Male</label>
              <input type="radio" name="gender" id="male" />
            </div>
            <div class="item2">
              <label for="female">Female</label>
              <input type="radio" name="gender" id="female" />
            </div>
            <div class="item3">
              <label for="nope">Nope</label>
              <input type="radio" name="gender" id="nope" />
            </div>
          </div>
          <input id="Submit" type="submit" value="LOGIN" />
        </form>

        <p>
          Not registered?
          <a href="" id="signup">Create an account</a>
        </p>
        <div id="bgg">
          <h1>Disclaimers</h1>

          <ul>
            <li class="main">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
              laoreet lacus sit amet maximus interdum.
            </li>

            <li class="main">
              Duis metus velit, interdum sed quam quis, laoreet condimentum dui.
              Vestibulum quis enim ullamcorper, ullamcorper ligula id, finibus
              sem.
            </li>

            <li class="main">
              Donec condimentum consectetur eros, fringilla condimentum sapien
              mollis sit amet.
            </li>

            <li class="main">
              Nam ipsum magna, dictum pellentesque elementum et, tempus luctus
              sapien.
            </li>

            <li class="main">
              In hac habitasse platea dictumst. In blandit turpis at orci
              viverra posuere. Maecenas vel arcu at mi facilisis tincidunt quis
              ut metus. Proin commodo sem eu lorem mattis, eget mollis mi
              efficitur.
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script>
        // effort to redirect the page back to welcome
      function login() {
        const params = new URLSearchParams(document.location.search);
        const username = params.get("username");
        const password = params.get("password");
        const body = { username, password };
        const xhr = new XMLHttpRequest();
        const apiRequestURL = "http://localhost:3000";
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            // alert(xhr.response);
            window.location.assign =
              "http://127.0.0.1:5500/miniProject2/indexmeow.html";
          } else if (xhr.readyState === 4 && xhr.status !== 200) {
            alert(xhr.response);
          }
        };
        xhr.open("post", apiRequestURL, true);
        xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
        xhr.send(JSON.stringify(body));
      }
    </script>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
